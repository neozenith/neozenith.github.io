<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Self-Signed Certificates | Josh Peak - A Caffeinated Release Valve</title>
    <meta name="description" content="A rant on Corporate Proxies causing an oxymoron of security practices.">
    <link rel="icon" href="/images/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.3f3f63db.css" as="style"><link rel="preload" href="/assets/js/app.8dc9b51d.js" as="script"><link rel="preload" href="/assets/js/2.9a1beb27.js" as="script"><link rel="preload" href="/assets/js/12.b23f43b3.js" as="script"><link rel="prefetch" href="/assets/js/10.011c3a7c.js"><link rel="prefetch" href="/assets/js/11.3baa2657.js"><link rel="prefetch" href="/assets/js/13.403c7529.js"><link rel="prefetch" href="/assets/js/14.14cef011.js"><link rel="prefetch" href="/assets/js/15.8df76139.js"><link rel="prefetch" href="/assets/js/16.da54d06f.js"><link rel="prefetch" href="/assets/js/17.2e7db2ea.js"><link rel="prefetch" href="/assets/js/3.3b4ae99d.js"><link rel="prefetch" href="/assets/js/4.8561ce3f.js"><link rel="prefetch" href="/assets/js/5.53e42746.js"><link rel="prefetch" href="/assets/js/6.e4c771eb.js"><link rel="prefetch" href="/assets/js/7.cbffdce7.js"><link rel="prefetch" href="/assets/js/8.f0b8c266.js"><link rel="prefetch" href="/assets/js/9.8f508152.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f3f63db.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Josh Peak - A Caffeinated Release Valve</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">Posts</a></div><div class="nav-item"><a href="https://au.linkedin.com/in/neozenith" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinkedIn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/neozenith" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">Posts</a></div><div class="nav-item"><a href="https://au.linkedin.com/in/neozenith" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinkedIn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/neozenith" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="context"><a href="#context" aria-hidden="true" class="header-anchor">#</a> Context</h1> <p>God damn corporate proxies.... The oxymoron of security practices.</p> <p>Don't get me wrong. I love and appreciate their value in providing a gated community. When you work for any company with a large enough
target on their back you want layers of protection, to make sure you haven't been hacked overnight and still have a job to go to in the morning.</p> <h1 id="the-problem"><a href="#the-problem" aria-hidden="true" class="header-anchor">#</a> The problem</h1> <p>They break security protocols to add new security protocols. In particular they perform a
&quot;trusted&quot; <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack" target="_blank" rel="noopener noreferrer">Man in the middle attack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (MitM) but lucky for us make no attempt to cover it up.</p> <p>Just like a vandal intercepting your mail, rifling through it, resealing it and <em>signing their work</em> you know which vandal claims
to have rummaged through your wine club delivery.</p> <h1 id="what-is-trust"><a href="#what-is-trust" aria-hidden="true" class="header-anchor">#</a> What is trust?</h1> <p>For the sake of this article you are going to trust that I actually am Josh, but if I'm signing off on this dirty work as Doug, then that is
a <em>claim</em>.</p> <p>Normally you would ask me to produce a driver's license or passport to verify my claim. Now these official documents are created by a
trusted third party like the Passport Office. Not just you, but society, has agreed that the Passport Office does a good enough job issuing
these passports to only the person identified on that document and I can't get a passport printed off calling me Doug.</p> <p>In this scenario the Passport Office is what is called a Certificate Authority store.</p> <p><a href="https://curl.haxx.se/docs/caextract.html" target="_blank" rel="noopener noreferrer">cURL CA Extract<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>The kind people at <code>cURL</code> have extracted the list of corporate entities that do a pretty good job of verifying identities before putting their
digital co-signature on my passport claiming I am Doug.</p> <p>Now, as you may have gathered... trust is a very fickle beast. As I was once told by a chief security expert:</p> <blockquote><p>Security is the tradeoff between <em>paranoia</em> and <em>peace of mind</em>.</p></blockquote> <h1 id="paranoia"><a href="#paranoia" aria-hidden="true" class="header-anchor">#</a> Paranoia</h1> <p>There are many reasons to not trust the Passport Office and become your own trust authority.</p> <p>First and foremost, getting these certificates signed and updated annually is expensive.</p> <p>DigiCert is selling <a href="https://www.digicert.com/compare-and-buy-ssl-certificates/" target="_blank" rel="noopener noreferrer">Extended Validation Certificates for US$299/year<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>But then there is this gem from the <a href="https://aws.amazon.com/certificate-manager/faqs/#ACM_Private_Certificate_Authority" target="_blank" rel="noopener noreferrer">AWS certificate manager FAQs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p><strong>Q: What are self-signed certificates and why should organizations use certificates from a private CA instead?</strong></p> <p>Self-signed certificates are those which are issued without a CA. Unlike certificates issued from a secure root maintained by a CA, self-signed certificates act as their own root, and as a result they have significant limitations: they can be used to provide on the wire encryption but not to verify identity, and they cannot be revoked. <strong>They are unacceptable from a security perspective, but organizations use them nonetheless because they are easy to generate, require no expertise or infrastructure, and many applications accept them</strong>. There are no controls in place for issuing self-signed certificates. Organizations that use them incur greater risk of outages caused by certificate expirations because they have no way to track expiration dates. ACM Private CA solves these problems.</p></blockquote> <p>Yet if they don't want the organisation validation (OV) or extended validation (EV)
and domain validation is sufficient then there is the <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Lets Encrypt<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> initiative.</p> <blockquote><p><em>Free, automated and open</em>.</p></blockquote> <p>The next problem is: <em>why should people trust you?</em></p> <p>I can print out an ID claiming I'm from Corporate Mail Inspectors and I am called Doug but why should you trust that?</p> <p>Well if it is well known that your company has a division called Corporate Mail Inspectors then you won't bat an eye that Doug is
rummaging through and resealing your parcels.</p> <p>We have established trust again.</p> <p>So if your corporate proxy is claiming it is doing this, you have to update <em>everyone's</em> trust stores. This is a lot of work.</p> <p>Every new computer, every rebuild, every tool.... This is a growing cost of lost time.</p> <h1 id="paradox"><a href="#paradox" aria-hidden="true" class="header-anchor">#</a> Paradox</h1> <p>How this presents is that there is an untrusted certificate and the default actions are to walk away or ignore the exception.</p> <p>So employees get into the habit of letting anyone rummage through your mail.</p> <p>This has openned up an attack vector for a legitimately malicious MitM attack.</p> <p>When really, the option to whitelist this one and only certificate, should have been an option.
Every subsequent untrusted certificate should be treated with the same amount of skepticism the first one gathered.</p> <p>Rather than fostering a culture of security, we have a culture of complacency.</p> <p>So how secure is your security protocol after all?</p> <p>The funny part, is paying to get a legitimate certificate (passport), whilst expensive, could be a lot cheaper than getting compromised.</p> <h1 id="resources"><a href="#resources" aria-hidden="true" class="header-anchor">#</a> Resources</h1> <p>You'll find in the resources below two of my answers to solving these issues inside corporates for tooling git and python.</p> <ul><li><a href="https://curl.haxx.se/docs/caextract.html" target="_blank" rel="noopener noreferrer">cURL CA Extract<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them" target="_blank" rel="noopener noreferrer">Certificates and how to convert them<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://stackoverflow.com/questions/11621768/how-can-i-make-git-accept-a-self-signed-certificate/41253757#41253757" target="_blank" rel="noopener noreferrer">How can I make git accept a self signed certificate?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://stackoverflow.com/a/52961564/622276" target="_blank" rel="noopener noreferrer">How to add a custom CA Root certificate to the CA Store used by Python in Windows?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8dc9b51d.js" defer></script><script src="/assets/js/2.9a1beb27.js" defer></script><script src="/assets/js/12.b23f43b3.js" defer></script>
  </body>
</html>
